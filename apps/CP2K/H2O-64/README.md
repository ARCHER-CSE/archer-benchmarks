# CP2K H2O-64 Benchmark

## Introduction

This is the H2O-64 benchmark. According to the [CP2K benchmarks](https://www.cp2k.org/performance) page:

"This is an Ab-initio molecular dynamics of liquid water using the Born-Oppenheimer approach, using Quickstep DFT. Production quality settings for the basis sets (TZV2P) and the planewave cutoff (280 Ry) are chosen, and the Local Density Approximation (LDA) is used for the calculation of the Exchange-Correlation energy. The configurations were generated by classical equilibration, and the initial guess of the electronic density is made based on Atomic Orbitals."

H2O-64.inp: a system of 64 water molecules (192 atoms, 512 electrons) in a 12.4 cubic angstrom cell and MD is run for 10 steps

## Compiling CP2K

Instructions for compiling CP2K (for ARCHER2) can be found [here](https://github.com/hpc-uk/build-instructions/tree/main/apps/CP2K/ARCHER2-CP2K-7.1")

## Required files
The input and data files required for this benchmark can be found in the [input](input/) directory in this repository. The submit scripts can be found in the job_scripts directory:

- [ARCHER job submission scripts](job_scripts/ARCHER2/)

## Results

Results from this benchmark can be found in the results directory of this repository.

- [ARCHER2 results](results/ARCHER2/). 

## Running the benchmark

### ARCHER2

#### Benchmark Calculation

Once the benchmark has completed (typically takes <10 minutes) the time taken can be determined from the job's output by looking for `CP2K` in the timing information:

```
-------------------------------------------------------------------------------
 -                                                                             -
 -                                T I M I N G                                  -
 -                                                                             -
 -------------------------------------------------------------------------------
 SUBROUTINE                       CALLS  ASD         SELF TIME        TOTAL TIME
                                MAXIMUM       AVERAGE  MAXIMUM  AVERAGE  MAXIMUM
 CP2K                                 1  1.0    0.178    0.295  200.814  200.816
 qs_energies                          1  2.0    0.000    0.000  200.091  200.093
 scf_env_do_scf                       1  3.0    0.000    0.000  198.017  198.018
 qs_ks_update_qs_env                  8  5.0    0.000    0.000  161.422  161.440
 rebuild_ks_matrix                    7  6.0    0.000    0.000  161.419  161.437
 qs_ks_build_kohn_sham_matrix         7  7.0    0.001    0.001  161.419  161.437
 hfx_ks_matrix                        7  8.0    0.000    0.000  154.464  154.495
```
Or by using `grep`, e.g.

```
$ grep "CP2K      " CP2K_256.o5608893
 CP2K                                 1  1.0    0.178    0.295  200.814  200.816
```
